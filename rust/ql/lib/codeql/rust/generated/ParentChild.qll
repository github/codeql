// generated by codegen
/**
 * This module provides the generated parent/child relationship.
 */

import codeql.rust.elements

private module Impl {
  private Element getImmediateChildOfElement(Element e, int index, string partialPredicateCall) {
    none()
  }

  private Element getImmediateChildOfFile(File e, int index, string partialPredicateCall) {
    exists(int b, int bElement, int n |
      b = 0 and
      bElement = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfElement(e, i, _)) | i) and
      n = bElement and
      (
        none()
        or
        result = getImmediateChildOfElement(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfLocatable(Locatable e, int index, string partialPredicateCall) {
    exists(int b, int bElement, int n |
      b = 0 and
      bElement = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfElement(e, i, _)) | i) and
      n = bElement and
      (
        none()
        or
        result = getImmediateChildOfElement(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfLocation(Location e, int index, string partialPredicateCall) {
    exists(int b, int bElement, int n |
      b = 0 and
      bElement = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfElement(e, i, _)) | i) and
      n = bElement and
      (
        none()
        or
        result = getImmediateChildOfElement(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfAstNode(AstNode e, int index, string partialPredicateCall) {
    exists(int b, int bLocatable, int n |
      b = 0 and
      bLocatable = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfLocatable(e, i, _)) | i) and
      n = bLocatable and
      (
        none()
        or
        result = getImmediateChildOfLocatable(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfDbFile(DbFile e, int index, string partialPredicateCall) {
    exists(int b, int bFile, int n |
      b = 0 and
      bFile = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfFile(e, i, _)) | i) and
      n = bFile and
      (
        none()
        or
        result = getImmediateChildOfFile(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfDbLocation(DbLocation e, int index, string partialPredicateCall) {
    exists(int b, int bLocation, int n |
      b = 0 and
      bLocation = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfLocation(e, i, _)) | i) and
      n = bLocation and
      (
        none()
        or
        result = getImmediateChildOfLocation(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfUnknownFile(
    UnknownFile e, int index, string partialPredicateCall
  ) {
    exists(int b, int bFile, int n |
      b = 0 and
      bFile = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfFile(e, i, _)) | i) and
      n = bFile and
      (
        none()
        or
        result = getImmediateChildOfFile(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfUnknownLocation(
    UnknownLocation e, int index, string partialPredicateCall
  ) {
    exists(int b, int bLocation, int n |
      b = 0 and
      bLocation = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfLocation(e, i, _)) | i) and
      n = bLocation and
      (
        none()
        or
        result = getImmediateChildOfLocation(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfDeclaration(
    Declaration e, int index, string partialPredicateCall
  ) {
    exists(int b, int bAstNode, int n |
      b = 0 and
      bAstNode = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfAstNode(e, i, _)) | i) and
      n = bAstNode and
      (
        none()
        or
        result = getImmediateChildOfAstNode(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfExpr(Expr e, int index, string partialPredicateCall) {
    exists(int b, int bAstNode, int n |
      b = 0 and
      bAstNode = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfAstNode(e, i, _)) | i) and
      n = bAstNode and
      (
        none()
        or
        result = getImmediateChildOfAstNode(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfLabel(Label e, int index, string partialPredicateCall) {
    exists(int b, int bAstNode, int n |
      b = 0 and
      bAstNode = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfAstNode(e, i, _)) | i) and
      n = bAstNode and
      (
        none()
        or
        result = getImmediateChildOfAstNode(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfMatchArm(MatchArm e, int index, string partialPredicateCall) {
    exists(int b, int bAstNode, int n, int nPat, int nGuard, int nExpr |
      b = 0 and
      bAstNode = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfAstNode(e, i, _)) | i) and
      n = bAstNode and
      nPat = n + 1 and
      nGuard = nPat + 1 and
      nExpr = nGuard + 1 and
      (
        none()
        or
        result = getImmediateChildOfAstNode(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getPat() and partialPredicateCall = "Pat()"
        or
        index = nPat and result = e.getGuard() and partialPredicateCall = "Guard()"
        or
        index = nGuard and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfPat(Pat e, int index, string partialPredicateCall) {
    exists(int b, int bAstNode, int n |
      b = 0 and
      bAstNode = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfAstNode(e, i, _)) | i) and
      n = bAstNode and
      (
        none()
        or
        result = getImmediateChildOfAstNode(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfStmt(Stmt e, int index, string partialPredicateCall) {
    exists(int b, int bAstNode, int n |
      b = 0 and
      bAstNode = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfAstNode(e, i, _)) | i) and
      n = bAstNode and
      (
        none()
        or
        result = getImmediateChildOfAstNode(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfTypeRef(TypeRef e, int index, string partialPredicateCall) {
    exists(int b, int bAstNode, int n |
      b = 0 and
      bAstNode = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfAstNode(e, i, _)) | i) and
      n = bAstNode and
      (
        none()
        or
        result = getImmediateChildOfAstNode(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfUnimplemented(
    Unimplemented e, int index, string partialPredicateCall
  ) {
    exists(int b, int bAstNode, int n |
      b = 0 and
      bAstNode = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfAstNode(e, i, _)) | i) and
      n = bAstNode and
      (
        none()
        or
        result = getImmediateChildOfAstNode(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfArrayExpr(ArrayExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfAwaitExpr(AwaitExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfBecomeExpr(BecomeExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfBinaryOpExpr(
    BinaryOpExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n, int nLhs, int nRhs |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nLhs = n + 1 and
      nRhs = nLhs + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getLhs() and partialPredicateCall = "Lhs()"
        or
        index = nLhs and result = e.getRhs() and partialPredicateCall = "Rhs()"
      )
    )
  }

  private Element getImmediateChildOfBindPat(BindPat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n, int nSubpat |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      nSubpat = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getSubpat() and partialPredicateCall = "Subpat()"
      )
    )
  }

  private Element getImmediateChildOfBlockExprBase(
    BlockExprBase e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n, int nStatement, int nTail |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nStatement = n + 1 + max(int i | i = -1 or exists(e.getStatement(i)) | i) and
      nTail = nStatement + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        result = e.getStatement(index - n) and
        partialPredicateCall = "Statement(" + (index - n).toString() + ")"
        or
        index = nStatement and result = e.getTail() and partialPredicateCall = "Tail()"
      )
    )
  }

  private Element getImmediateChildOfBoxExpr(BoxExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfBoxPat(BoxPat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n, int nInner |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      nInner = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getInner() and partialPredicateCall = "Inner()"
      )
    )
  }

  private Element getImmediateChildOfBreakExpr(BreakExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr, int nLabel |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      nLabel = nExpr + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
        or
        index = nExpr and result = e.getLabel() and partialPredicateCall = "Label()"
      )
    )
  }

  private Element getImmediateChildOfCallExpr(CallExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nCallee, int nArg |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nCallee = n + 1 and
      nArg = nCallee + 1 + max(int i | i = -1 or exists(e.getArg(i)) | i) and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getCallee() and partialPredicateCall = "Callee()"
        or
        result = e.getArg(index - nCallee) and
        partialPredicateCall = "Arg(" + (index - nCallee).toString() + ")"
      )
    )
  }

  private Element getImmediateChildOfCastExpr(CastExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr, int nTypeRef |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      nTypeRef = nExpr + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
        or
        index = nExpr and result = e.getTypeRef() and partialPredicateCall = "TypeRef()"
      )
    )
  }

  private Element getImmediateChildOfClosureExpr(
    ClosureExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n, int nArg, int nArgType, int nRetType, int nBody |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nArg = n + 1 + max(int i | i = -1 or exists(e.getArg(i)) | i) and
      nArgType = nArg + 1 + max(int i | i = -1 or exists(e.getArgType(i)) | i) and
      nRetType = nArgType + 1 and
      nBody = nRetType + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        result = e.getArg(index - n) and
        partialPredicateCall = "Arg(" + (index - n).toString() + ")"
        or
        result = e.getArgType(index - nArg) and
        partialPredicateCall = "ArgType(" + (index - nArg).toString() + ")"
        or
        index = nArgType and result = e.getRetType() and partialPredicateCall = "RetType()"
        or
        index = nRetType and result = e.getBody() and partialPredicateCall = "Body()"
      )
    )
  }

  private Element getImmediateChildOfConstBlockPat(
    ConstBlockPat e, int index, string partialPredicateCall
  ) {
    exists(int b, int bPat, int n, int nExpr |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfConstExpr(ConstExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfContinueExpr(
    ContinueExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n, int nLabel |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nLabel = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getLabel() and partialPredicateCall = "Label()"
      )
    )
  }

  private Element getImmediateChildOfExprStmt(ExprStmt e, int index, string partialPredicateCall) {
    exists(int b, int bStmt, int n, int nExpr |
      b = 0 and
      bStmt = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfStmt(e, i, _)) | i) and
      n = bStmt and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfStmt(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfFieldExpr(FieldExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfFunction(Function e, int index, string partialPredicateCall) {
    exists(int b, int bDeclaration, int n, int nBody |
      b = 0 and
      bDeclaration =
        b + 1 + max(int i | i = -1 or exists(getImmediateChildOfDeclaration(e, i, _)) | i) and
      n = bDeclaration and
      nBody = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfDeclaration(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getBody() and partialPredicateCall = "Body()"
      )
    )
  }

  private Element getImmediateChildOfIfExpr(IfExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nCondition, int nThen, int nElse |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nCondition = n + 1 and
      nThen = nCondition + 1 and
      nElse = nThen + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getCondition() and partialPredicateCall = "Condition()"
        or
        index = nCondition and result = e.getThen() and partialPredicateCall = "Then()"
        or
        index = nThen and result = e.getElse() and partialPredicateCall = "Else()"
      )
    )
  }

  private Element getImmediateChildOfIndexExpr(IndexExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nBase, int nIndex |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nBase = n + 1 and
      nIndex = nBase + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getBase() and partialPredicateCall = "Base()"
        or
        index = nBase and result = e.getIndex() and partialPredicateCall = "Index()"
      )
    )
  }

  private Element getImmediateChildOfInlineAsmExpr(
    InlineAsmExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfItemStmt(ItemStmt e, int index, string partialPredicateCall) {
    exists(int b, int bStmt, int n |
      b = 0 and
      bStmt = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfStmt(e, i, _)) | i) and
      n = bStmt and
      (
        none()
        or
        result = getImmediateChildOfStmt(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfLetExpr(LetExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nPat, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nPat = n + 1 and
      nExpr = nPat + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getPat() and partialPredicateCall = "Pat()"
        or
        index = nPat and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfLetStmt(LetStmt e, int index, string partialPredicateCall) {
    exists(int b, int bStmt, int n, int nPat, int nTypeRef, int nInitializer, int nElse |
      b = 0 and
      bStmt = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfStmt(e, i, _)) | i) and
      n = bStmt and
      nPat = n + 1 and
      nTypeRef = nPat + 1 and
      nInitializer = nTypeRef + 1 and
      nElse = nInitializer + 1 and
      (
        none()
        or
        result = getImmediateChildOfStmt(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getPat() and partialPredicateCall = "Pat()"
        or
        index = nPat and result = e.getTypeRef() and partialPredicateCall = "TypeRef()"
        or
        index = nTypeRef and result = e.getInitializer() and partialPredicateCall = "Initializer()"
        or
        index = nInitializer and result = e.getElse() and partialPredicateCall = "Else()"
      )
    )
  }

  private Element getImmediateChildOfLitPat(LitPat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n, int nExpr |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfLiteralExpr(
    LiteralExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfLoopExpr(LoopExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nBody, int nLabel |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nBody = n + 1 and
      nLabel = nBody + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getBody() and partialPredicateCall = "Body()"
        or
        index = nBody and result = e.getLabel() and partialPredicateCall = "Label()"
      )
    )
  }

  private Element getImmediateChildOfMatchExpr(MatchExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr, int nBranch |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      nBranch = nExpr + 1 + max(int i | i = -1 or exists(e.getBranch(i)) | i) and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
        or
        result = e.getBranch(index - nExpr) and
        partialPredicateCall = "Branch(" + (index - nExpr).toString() + ")"
      )
    )
  }

  private Element getImmediateChildOfMethodCallExpr(
    MethodCallExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n, int nReceiver, int nArg |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nReceiver = n + 1 and
      nArg = nReceiver + 1 + max(int i | i = -1 or exists(e.getArg(i)) | i) and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getReceiver() and partialPredicateCall = "Receiver()"
        or
        result = e.getArg(index - nReceiver) and
        partialPredicateCall = "Arg(" + (index - nReceiver).toString() + ")"
      )
    )
  }

  private Element getImmediateChildOfMissingExpr(
    MissingExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfMissingPat(MissingPat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfModule(Module e, int index, string partialPredicateCall) {
    exists(int b, int bDeclaration, int n, int nDeclaration |
      b = 0 and
      bDeclaration =
        b + 1 + max(int i | i = -1 or exists(getImmediateChildOfDeclaration(e, i, _)) | i) and
      n = bDeclaration and
      nDeclaration = n + 1 + max(int i | i = -1 or exists(e.getDeclaration(i)) | i) and
      (
        none()
        or
        result = getImmediateChildOfDeclaration(e, index - b, partialPredicateCall)
        or
        result = e.getDeclaration(index - n) and
        partialPredicateCall = "Declaration(" + (index - n).toString() + ")"
      )
    )
  }

  private Element getImmediateChildOfOffsetOfExpr(
    OffsetOfExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n, int nContainer |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nContainer = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getContainer() and partialPredicateCall = "Container()"
      )
    )
  }

  private Element getImmediateChildOfOrPat(OrPat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n, int nArg |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      nArg = n + 1 + max(int i | i = -1 or exists(e.getArg(i)) | i) and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
        or
        result = e.getArg(index - n) and
        partialPredicateCall = "Arg(" + (index - n).toString() + ")"
      )
    )
  }

  private Element getImmediateChildOfPathExpr(PathExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfPathPat(PathPat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfRangeExpr(RangeExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nLhs, int nRhs |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nLhs = n + 1 and
      nRhs = nLhs + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getLhs() and partialPredicateCall = "Lhs()"
        or
        index = nLhs and result = e.getRhs() and partialPredicateCall = "Rhs()"
      )
    )
  }

  private Element getImmediateChildOfRangePat(RangePat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n, int nStart, int nEnd |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      nStart = n + 1 and
      nEnd = nStart + 1 and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getStart() and partialPredicateCall = "Start()"
        or
        index = nStart and result = e.getEnd() and partialPredicateCall = "End()"
      )
    )
  }

  private Element getImmediateChildOfRecordLitExpr(
    RecordLitExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfRecordPat(RecordPat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfRefExpr(RefExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfRefPat(RefPat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n, int nPat |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      nPat = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getPat() and partialPredicateCall = "Pat()"
      )
    )
  }

  private Element getImmediateChildOfReturnExpr(ReturnExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfSlicePat(SlicePat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n, int nPrefix, int nSlice, int nSuffix |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      nPrefix = n + 1 + max(int i | i = -1 or exists(e.getPrefix(i)) | i) and
      nSlice = nPrefix + 1 and
      nSuffix = nSlice + 1 + max(int i | i = -1 or exists(e.getSuffix(i)) | i) and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
        or
        result = e.getPrefix(index - n) and
        partialPredicateCall = "Prefix(" + (index - n).toString() + ")"
        or
        index = nPrefix and result = e.getSlice() and partialPredicateCall = "Slice()"
        or
        result = e.getSuffix(index - nSlice) and
        partialPredicateCall = "Suffix(" + (index - nSlice).toString() + ")"
      )
    )
  }

  private Element getImmediateChildOfTupleExpr(TupleExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 + max(int i | i = -1 or exists(e.getExpr(i)) | i) and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        result = e.getExpr(index - n) and
        partialPredicateCall = "Expr(" + (index - n).toString() + ")"
      )
    )
  }

  private Element getImmediateChildOfTuplePat(TuplePat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n, int nArg |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      nArg = n + 1 + max(int i | i = -1 or exists(e.getArg(i)) | i) and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
        or
        result = e.getArg(index - n) and
        partialPredicateCall = "Arg(" + (index - n).toString() + ")"
      )
    )
  }

  private Element getImmediateChildOfTupleStructPat(
    TupleStructPat e, int index, string partialPredicateCall
  ) {
    exists(int b, int bPat, int n |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfUnaryOpExpr(
    UnaryOpExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfUnderscoreExpr(
    UnderscoreExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bExpr, int n |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfWildPat(WildPat e, int index, string partialPredicateCall) {
    exists(int b, int bPat, int n |
      b = 0 and
      bPat = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfPat(e, i, _)) | i) and
      n = bPat and
      (
        none()
        or
        result = getImmediateChildOfPat(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfYeetExpr(YeetExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfYieldExpr(YieldExpr e, int index, string partialPredicateCall) {
    exists(int b, int bExpr, int n, int nExpr |
      b = 0 and
      bExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfExpr(e, i, _)) | i) and
      n = bExpr and
      nExpr = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getExpr() and partialPredicateCall = "Expr()"
      )
    )
  }

  private Element getImmediateChildOfAsyncBlockExpr(
    AsyncBlockExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bBlockExprBase, int n |
      b = 0 and
      bBlockExprBase =
        b + 1 + max(int i | i = -1 or exists(getImmediateChildOfBlockExprBase(e, i, _)) | i) and
      n = bBlockExprBase and
      (
        none()
        or
        result = getImmediateChildOfBlockExprBase(e, index - b, partialPredicateCall)
      )
    )
  }

  private Element getImmediateChildOfBlockExpr(BlockExpr e, int index, string partialPredicateCall) {
    exists(int b, int bBlockExprBase, int n, int nLabel |
      b = 0 and
      bBlockExprBase =
        b + 1 + max(int i | i = -1 or exists(getImmediateChildOfBlockExprBase(e, i, _)) | i) and
      n = bBlockExprBase and
      nLabel = n + 1 and
      (
        none()
        or
        result = getImmediateChildOfBlockExprBase(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getLabel() and partialPredicateCall = "Label()"
      )
    )
  }

  private Element getImmediateChildOfElementListExpr(
    ElementListExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bArrayExpr, int n, int nElement |
      b = 0 and
      bArrayExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfArrayExpr(e, i, _)) | i) and
      n = bArrayExpr and
      nElement = n + 1 + max(int i | i = -1 or exists(e.getElement(i)) | i) and
      (
        none()
        or
        result = getImmediateChildOfArrayExpr(e, index - b, partialPredicateCall)
        or
        result = e.getElement(index - n) and
        partialPredicateCall = "Element(" + (index - n).toString() + ")"
      )
    )
  }

  private Element getImmediateChildOfRepeatExpr(RepeatExpr e, int index, string partialPredicateCall) {
    exists(int b, int bArrayExpr, int n, int nInitializer, int nRepeat |
      b = 0 and
      bArrayExpr = b + 1 + max(int i | i = -1 or exists(getImmediateChildOfArrayExpr(e, i, _)) | i) and
      n = bArrayExpr and
      nInitializer = n + 1 and
      nRepeat = nInitializer + 1 and
      (
        none()
        or
        result = getImmediateChildOfArrayExpr(e, index - b, partialPredicateCall)
        or
        index = n and result = e.getInitializer() and partialPredicateCall = "Initializer()"
        or
        index = nInitializer and result = e.getRepeat() and partialPredicateCall = "Repeat()"
      )
    )
  }

  private Element getImmediateChildOfUnsafeBlockExpr(
    UnsafeBlockExpr e, int index, string partialPredicateCall
  ) {
    exists(int b, int bBlockExprBase, int n |
      b = 0 and
      bBlockExprBase =
        b + 1 + max(int i | i = -1 or exists(getImmediateChildOfBlockExprBase(e, i, _)) | i) and
      n = bBlockExprBase and
      (
        none()
        or
        result = getImmediateChildOfBlockExprBase(e, index - b, partialPredicateCall)
      )
    )
  }

  cached
  Element getImmediateChild(Element e, int index, string partialAccessor) {
    // why does this look more complicated than it should?
    // * none() simplifies generation, as we can append `or ...` without a special case for the first item
    none()
    or
    result = getImmediateChildOfDbFile(e, index, partialAccessor)
    or
    result = getImmediateChildOfDbLocation(e, index, partialAccessor)
    or
    result = getImmediateChildOfUnknownFile(e, index, partialAccessor)
    or
    result = getImmediateChildOfUnknownLocation(e, index, partialAccessor)
    or
    result = getImmediateChildOfLabel(e, index, partialAccessor)
    or
    result = getImmediateChildOfMatchArm(e, index, partialAccessor)
    or
    result = getImmediateChildOfTypeRef(e, index, partialAccessor)
    or
    result = getImmediateChildOfUnimplemented(e, index, partialAccessor)
    or
    result = getImmediateChildOfAwaitExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfBecomeExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfBinaryOpExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfBindPat(e, index, partialAccessor)
    or
    result = getImmediateChildOfBoxExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfBoxPat(e, index, partialAccessor)
    or
    result = getImmediateChildOfBreakExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfCallExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfCastExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfClosureExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfConstBlockPat(e, index, partialAccessor)
    or
    result = getImmediateChildOfConstExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfContinueExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfExprStmt(e, index, partialAccessor)
    or
    result = getImmediateChildOfFieldExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfFunction(e, index, partialAccessor)
    or
    result = getImmediateChildOfIfExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfIndexExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfInlineAsmExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfItemStmt(e, index, partialAccessor)
    or
    result = getImmediateChildOfLetExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfLetStmt(e, index, partialAccessor)
    or
    result = getImmediateChildOfLitPat(e, index, partialAccessor)
    or
    result = getImmediateChildOfLiteralExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfLoopExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfMatchExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfMethodCallExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfMissingExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfMissingPat(e, index, partialAccessor)
    or
    result = getImmediateChildOfModule(e, index, partialAccessor)
    or
    result = getImmediateChildOfOffsetOfExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfOrPat(e, index, partialAccessor)
    or
    result = getImmediateChildOfPathExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfPathPat(e, index, partialAccessor)
    or
    result = getImmediateChildOfRangeExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfRangePat(e, index, partialAccessor)
    or
    result = getImmediateChildOfRecordLitExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfRecordPat(e, index, partialAccessor)
    or
    result = getImmediateChildOfRefExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfRefPat(e, index, partialAccessor)
    or
    result = getImmediateChildOfReturnExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfSlicePat(e, index, partialAccessor)
    or
    result = getImmediateChildOfTupleExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfTuplePat(e, index, partialAccessor)
    or
    result = getImmediateChildOfTupleStructPat(e, index, partialAccessor)
    or
    result = getImmediateChildOfUnaryOpExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfUnderscoreExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfWildPat(e, index, partialAccessor)
    or
    result = getImmediateChildOfYeetExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfYieldExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfAsyncBlockExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfBlockExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfElementListExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfRepeatExpr(e, index, partialAccessor)
    or
    result = getImmediateChildOfUnsafeBlockExpr(e, index, partialAccessor)
  }
}

/**
 * Gets the "immediate" parent of `e`. "Immediate" means not taking into account node resolution: for example
 * if `e` has conversions, `getImmediateParent(e)` will give the innermost conversion in the hidden AST.
 */
Element getImmediateParent(Element e) {
  // `unique` is used here to tell the optimizer that there is in fact only one result
  // this is tested by the `library-tests/parent/no_double_parents.ql` test
  result = unique(Element x | e = Impl::getImmediateChild(x, _, _) | x)
}

/**
 * Gets the immediate child indexed at `index`. Indexes are not guaranteed to be contiguous, but are guaranteed to be distinct. `accessor` is bound the member predicate call resulting in the given child.
 */
Element getImmediateChildAndAccessor(Element e, int index, string accessor) {
  exists(string partialAccessor |
    result = Impl::getImmediateChild(e, index, partialAccessor) and
    accessor = "get" + partialAccessor
  )
}

/**
 * Gets the child indexed at `index`. Indexes are not guaranteed to be contiguous, but are guaranteed to be distinct. `accessor` is bound the member predicate call resulting in the given child.
 */
Element getChildAndAccessor(Element e, int index, string accessor) {
  exists(string partialAccessor |
    result = Impl::getImmediateChild(e, index, partialAccessor).resolve() and
    accessor = "get" + partialAccessor
  )
}
