
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Crown the rightful heir &#8212; CodeQL</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Cross the river" href="cross-the-river.html" />
    <link rel="prev" title="Catch the fire starter" href="catch-the-fire-starter.html" />

<title>CodeQL docs</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="../_static/custom.css" type="text/css" />
<link rel="stylesheet" href="../_static/primer.css" type="text/css" />


  </head><body>
<header class="Header">
    <div class="Header-item--full">
        <a href="https://codeql.github.com/docs" class="Header-link f2 d-flex flex-items-center">
            <!-- <%= octicon "mark-github", class: "mr-2", height: 32 %> -->
            <svg height="32" class="octicon octicon-mark-github mr-2" viewBox="0 0 16 16" version="1.1" width="32"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z">
                </path>
            </svg>
            <span class="hide-sm">CodeQL documentation</span>
        </a>
    </div>
    <div class="Header-item hide-sm hide-md">
        <script src="https://addsearch.com/js/?key=93b4d287e2fc079a4089412b669785d5&categories=!0xhelp.semmle.com,0xcodeql.github.com,1xdocs,1xcodeql-standard-libraries,1xcodeql-query-help"></script>
    </div>
    <div class="Header-item">

        <details class="dropdown details-reset details-overlay d-inline-block">
            <summary class="btn bg-gray-dark text-white border" aria-haspopup="true">
                CodeQL resources
                <div class="dropdown-caret"></div>
            </summary>

            <ul class="dropdown-menu dropdown-menu-se dropdown-menu-dark">
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/codeql-overview">CodeQL overview</a></li>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    CodeQL tools
                </div>
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/codeql-for-visual-studio-code">CodeQL for VS Code</a>
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/codeql-cli">CodeQL CLI</a>
                </li>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    CodeQL guides
                </div>
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/writing-codeql-queries">Writing CodeQL queries</a></li>
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/codeql-language-guides">CodeQL language guides</a>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    Reference docs
                </div>
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/ql-language-reference/">QL language
                        reference</a>
                <li><a class="dropdown-item" href="https://codeql.github.com/codeql-standard-libraries">CodeQL
                        standard-libraries</a>
                <li><a class="dropdown-item" href="https://codeql.github.com/codeql-query-help">CodeQL
                        query help</a>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    Source files
                </div>
                <li><a class="dropdown-item" href="https://github.com/github/codeql">CodeQL repository</a>
            </ul>
        </details>

    </div>

</header>
<main class="bg-gray-light clearfix">
<nav class="SideNav position-sticky top-0 col-lg-3 col-md-3 float-left p-4 hide-sm hide-md overflow-y-auto">

    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../codeql-overview/index.html">CodeQL overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../codeql-for-visual-studio-code/index.html">CodeQL for Visual Studio Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../codeql-cli/index.html">CodeQL CLI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Writing CodeQL queries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="codeql-queries.html">CodeQL queries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="ql-tutorials.html">QL tutorials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction-to-ql.html">Introduction to QL</a></li>
<li class="toctree-l3"><a class="reference internal" href="find-the-thief.html">Find the thief</a></li>
<li class="toctree-l3"><a class="reference internal" href="catch-the-fire-starter.html">Catch the fire starter</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Crown the rightful heir</a></li>
<li class="toctree-l3"><a class="reference internal" href="cross-the-river.html">Cross the river</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../codeql-language-guides/index.html">CodeQL language guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ql-language-reference/index.html">QL language reference</a></li>
</ul>


</nav>


<div class="body col-sm-12 col-md-9 col-lg-9 float-left border-left">

    <div class="hide-lg hide-xl px-4 pt-4">
        
<div class="related" role="navigation" aria-label="related navigation">
    <ul>
        <li class="nav-item nav-item-0"><a href="../contents.html">CodeQL</a> &#187;</li>
        <li class="nav-item nav-item-1"><a href="index.html"
                >Writing CodeQL queries</a> &#187;</li>
        <li class="nav-item nav-item-2"><a href="ql-tutorials.html"
                accesskey="U">QL tutorials</a> &#187;</li> 
    </ul>
</div>
    </div>

    <article class="p-4 col-lg-10 col-md-10 col-sm-12">
        
  <div class="section" id="crown-the-rightful-heir-1">
<span id="crown-the-rightful-heir"></span><h1>Crown the rightful heir<a class="headerlink" href="#crown-the-rightful-heir-1" title="Permalink to this headline">¶</a></h1>
<p>This is a QL detective puzzle that shows you how to use recursion in QL to write more complex queries.</p>
<div class="section" id="king-basil-s-heir">
<h2>King Basil’s heir<a class="headerlink" href="#king-basil-s-heir" title="Permalink to this headline">¶</a></h2>
<p>Phew! No more crimes in the village—you can finally leave the village and go home.</p>
<p>But then… During your last night in the village, the old king—the great King Basil—dies in his sleep and there is chaos everywhere!</p>
<p>The king never married and he had no children, so nobody knows who should inherit the king’s castle and fortune. Immediately, lots of villagers claim that they are somehow descended from the king’s family and that they are the true heir. People argue and fight and the situation seems hopeless.</p>
<p>Eventually you decide to stay in the village to resolve the argument and find the true heir to the throne.</p>
<p>You want to find out if anyone in the village is actually related to the king. This seems like a difficult task at first, but you start work confidently. You know the villagers quite well by now, and you have a list of all the parents in the village and their children.</p>
<p>To find out more about the king and his family, you get access to the castle and find some old family trees. You also include these relations in your database to see if anyone in the king’s family is still alive.</p>
<p>The following predicate is useful to help you access the data:</p>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Predicate</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">parentOf(Person</span> <span class="pre">p)</span></code></td>
<td>returns a parent of <code class="docutils literal notranslate"><span class="pre">p</span></code></td>
</tr>
</tbody>
</table>
<p>For example, you can list all children <code class="docutils literal notranslate"><span class="pre">p</span></code> together with their parents:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">from</span> <span class="n">Person</span> <span class="n">p</span>
<span class="k">select</span> <span class="n">parentOf</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; is a parent of &quot;</span> <span class="o">+</span> <span class="n">p</span>
</pre></div>
</div>
<p>There is too much information to search through by hand, so you write a QL query to help you find the king’s heir.</p>
<p>We know that the king has no children himself, but perhaps he has siblings. Write a query to find out:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">from</span> <span class="n">Person</span> <span class="n">p</span>
<span class="k">where</span> <span class="n">parentOf</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">=</span> <span class="n">parentOf</span><span class="p">(</span><span class="s">&quot;King Basil&quot;</span><span class="p">)</span> <span class="k">and</span>
  <span class="k">not</span> <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;King Basil&quot;</span>
<span class="k">select</span> <span class="n">p</span>
</pre></div>
</div>
<p>He does indeed have siblings! But you need to check if any of them are alive… Here is one more predicate you might need:</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Predicate</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">isDeceased()</span></code></td>
<td>holds if the person is deceased</td>
</tr>
</tbody>
</table>
<p>Use this predicate to see if the any of the king’s siblings are alive.</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">from</span> <span class="n">Person</span> <span class="n">p</span>
<span class="k">where</span> <span class="n">parentOf</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">=</span> <span class="n">parentOf</span><span class="p">(</span><span class="s">&quot;King Basil&quot;</span><span class="p">)</span> <span class="k">and</span>
  <span class="k">not</span> <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;King Basil&quot;</span>
  <span class="k">and</span> <span class="k">not</span> <span class="n">p</span><span class="p">.</span><span class="n">isDeceased</span><span class="p">()</span>
<span class="k">select</span> <span class="n">p</span>
</pre></div>
</div>
<p>Unfortunately, none of King Basil’s siblings are alive. Time to investigate further. It might be helpful to define a predicate <code class="docutils literal notranslate"><span class="pre">childOf()</span></code> which returns a child of the person. To do this, the <code class="docutils literal notranslate"><span class="pre">parentOf()</span></code> predicate can be used inside the definition of <code class="docutils literal notranslate"><span class="pre">childOf()</span></code>. Remember that someone is a child of <code class="docutils literal notranslate"><span class="pre">p</span></code> if and only if <code class="docutils literal notranslate"><span class="pre">p</span></code> is their parent:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="n">Person</span> <span class="n">childOf</span><span class="p">(</span><span class="n">Person</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">p</span> <span class="o">=</span> <span class="n">parentOf</span><span class="p">(</span><span class="k">result</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<blockquote class="pull-quote">
<div><p>Note</p>
<p>As illustrated by the example above, you don’t have to directly write <code class="docutils literal notranslate"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">&lt;expression</span> <span class="pre">involving</span> <span class="pre">p&gt;</span></code> in the predicate definition. Instead you can also express the relation between <code class="docutils literal notranslate"><span class="pre">p</span></code> and <code class="docutils literal notranslate"><span class="pre">result</span></code> “backwards” by writing <code class="docutils literal notranslate"><span class="pre">p</span></code> in terms of <code class="docutils literal notranslate"><span class="pre">result</span></code>.</p>
</div></blockquote>
<p>Try to write a query to find out if any of the king’s siblings have children:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">from</span> <span class="n">Person</span> <span class="n">p</span>
<span class="k">where</span> <span class="n">parentOf</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">=</span> <span class="n">parentOf</span><span class="p">(</span><span class="s">&quot;King Basil&quot;</span><span class="p">)</span> <span class="k">and</span>
  <span class="k">not</span> <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;King Basil&quot;</span>
<span class="k">select</span> <span class="n">childOf</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<p>The query returns no results, so they have no children. But perhaps King Basil has a cousin who is alive or has children, or a second cousin, or…</p>
<p>This is getting complicated. Ideally, you want to define a predicate <code class="docutils literal notranslate"><span class="pre">relativeOf(Person</span> <span class="pre">p)</span></code> that lists all the relatives of <code class="docutils literal notranslate"><span class="pre">p</span></code>.</p>
<p>How could you do that?</p>
<p>It helps to think of a precise definition of <em>relative</em>. A possible definition is that two people are related if they have a common ancestor.</p>
<p>You can introduce a predicate <code class="docutils literal notranslate"><span class="pre">ancestorOf(Person</span> <span class="pre">p)</span></code> that lists all ancestors of <code class="docutils literal notranslate"><span class="pre">p</span></code>. An ancestor of <code class="docutils literal notranslate"><span class="pre">p</span></code> is just a parent of <code class="docutils literal notranslate"><span class="pre">p</span></code>, or a parent of a parent of <code class="docutils literal notranslate"><span class="pre">p</span></code>, or a parent of a parent of a parent of <code class="docutils literal notranslate"><span class="pre">p</span></code>, and so on. Unfortunately, this leads to an endless list of parents. You can’t write an infinite QL query, so there must be an easier approach.</p>
<p>Aha, you have an idea! You can say that an ancestor is either a parent, or a parent of someone you already know to be an ancestor.</p>
<p>You can translate this into QL as follows:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="n">Person</span> <span class="n">ancestorOf</span><span class="p">(</span><span class="n">Person</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">result</span> <span class="o">=</span> <span class="n">parentOf</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">or</span>
  <span class="k">result</span> <span class="o">=</span> <span class="n">parentOf</span><span class="p">(</span><span class="n">ancestorOf</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As you can see, you have used the predicate <code class="docutils literal notranslate"><span class="pre">ancestorOf()</span></code> inside its own definition. This is an example of <a class="reference internal" href="../ql-language-reference/recursion.html#recursion"><span class="std std-ref">recursion</span></a>.</p>
<p>This kind of recursion, where the same operation (in this case <code class="docutils literal notranslate"><span class="pre">parentOf()</span></code>) is applied multiple times, is very common in QL, and is known as the <em>transitive closure</em> of the operation. There are two special symbols <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">*</span></code> that are extremely useful when working with transitive closures:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">parentOf+(p)</span></code> applies the <code class="docutils literal notranslate"><span class="pre">parentOf()</span></code> predicate to <code class="docutils literal notranslate"><span class="pre">p</span></code> one or more times. This is equivalent to <code class="docutils literal notranslate"><span class="pre">ancestorOf(p)</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">parentOf*(p)</span></code> applies the <code class="docutils literal notranslate"><span class="pre">parentOf()</span></code> predicate to <code class="docutils literal notranslate"><span class="pre">p</span></code> zero or more times, so it returns an ancestor of <code class="docutils literal notranslate"><span class="pre">p</span></code> or <code class="docutils literal notranslate"><span class="pre">p</span></code> itself.</li>
</ul>
<p>Try using this new notation to define a predicate <code class="docutils literal notranslate"><span class="pre">relativeOf()</span></code> and use it to list all living relatives of the king.</p>
<p>Hint:</p>
<p>Here is one way to define <code class="docutils literal notranslate"><span class="pre">relativeOf()</span></code>:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="n">Person</span> <span class="n">relativeOf</span><span class="p">(</span><span class="n">Person</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">parentOf</span><span class="o">*</span><span class="p">(</span><span class="k">result</span><span class="p">)</span> <span class="o">=</span> <span class="n">parentOf</span><span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Don’t forget to use the predicate <code class="docutils literal notranslate"><span class="pre">isDeceased()</span></code> to find relatives that are still alive.</p>
<p>➤ <a class="reference external" href="#exercise-1">Check your answer</a></p>
</div>
<div class="section" id="select-the-true-heir">
<h2>Select the true heir<a class="headerlink" href="#select-the-true-heir" title="Permalink to this headline">¶</a></h2>
<p>At the next village meeting, you announce that there are two living relatives.</p>
<p>To decide who should inherit the king’s fortune, the villagers carefully read through the village constitution:</p>
<p><em>“The heir to the throne is the closest living relative of the king. Any person with a criminal record will not be considered. If there are multiple candidates, the oldest person is the heir.”</em></p>
<p>As your final challenge, define a predicate <code class="docutils literal notranslate"><span class="pre">hasCriminalRecord</span></code> so that <code class="docutils literal notranslate"><span class="pre">hasCriminalRecord(p)</span></code> holds if <code class="docutils literal notranslate"><span class="pre">p</span></code> is any of the criminals you unmasked earlier (in the “<a class="reference internal" href="find-the-thief.html"><span class="doc">Find the thief</span></a>” and “<a class="reference internal" href="catch-the-fire-starter.html"><span class="doc">Catch the fire starter</span></a>” tutorials).</p>
<p>➤ <a class="reference external" href="#exercise-2">Check your answer</a></p>
</div>
<div class="section" id="experimental-explorations">
<h2>Experimental explorations<a class="headerlink" href="#experimental-explorations" title="Permalink to this headline">¶</a></h2>
<p>Congratulations! You have found the heir to the throne and restored peace to the village. However, you don’t have to leave the villagers just yet. There are still a couple more questions about the village constitution that you could answer for the villagers, by writing QL queries:</p>
<ul class="simple">
<li>Which villager is next in line to the throne? Could you write a predicate to determine how closely related the remaining villagers are to the new monarch?</li>
<li>How would you select the oldest candidate using a QL query, if multiple villagers have the same relationship to the monarch?</li>
</ul>
<p>You could also try writing more of your own QL queries to find interesting facts about the villagers. You are free to investigate whatever you like, but here are some suggestions:</p>
<ul class="simple">
<li>What is the most common hair color in the village? And in each region?</li>
<li>Which villager has the most children? Who has the most descendants?</li>
<li>How many people live in each region of the village?</li>
<li>Do all villagers live in the same region of the village as their parents?</li>
<li>Find out whether there are any time travelers in the village! (Hint: Look for “impossible” family relations.)</li>
</ul>
</div>
<div class="section" id="further-reading">
<h2>Further reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>“<a class="reference internal" href="../ql-language-reference/index.html#ql-language-reference"><span class="std std-ref">QL language reference</span></a>”</li>
<li>“<a class="reference internal" href="../codeql-overview/codeql-tools.html#codeql-tools"><span class="std std-ref">CodeQL tools</span></a>”</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="answers">
<h2>Answers<a class="headerlink" href="#answers" title="Permalink to this headline">¶</a></h2>
<p>In these answers, we use <code class="docutils literal notranslate"><span class="pre">/*</span></code> and <code class="docutils literal notranslate"><span class="pre">*/</span></code> to label the different parts of the query. Any text surrounded by <code class="docutils literal notranslate"><span class="pre">/*</span></code> and <code class="docutils literal notranslate"><span class="pre">*/</span></code> is not evaluated as part of the QL code, but is treated as a <em>comment</em>.</p>
<div class="section" id="exercise-1">
<h3>Exercise 1<a class="headerlink" href="#exercise-1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="n">tutorial</span>

<span class="n">Person</span> <span class="n">relativeOf</span><span class="p">(</span><span class="n">Person</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span> <span class="n">parentOf</span><span class="o">*</span><span class="p">(</span><span class="k">result</span><span class="p">)</span> <span class="o">=</span> <span class="n">parentOf</span><span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="p">}</span>

<span class="k">from</span> <span class="n">Person</span> <span class="n">p</span>
<span class="k">where</span>
  <span class="k">not</span> <span class="n">p</span><span class="p">.</span><span class="n">isDeceased</span><span class="p">()</span> <span class="k">and</span>
  <span class="n">p</span> <span class="o">=</span> <span class="n">relativeOf</span><span class="p">(</span><span class="s">&quot;King Basil&quot;</span><span class="p">)</span>
<span class="k">select</span> <span class="n">p</span>
</pre></div>
</div>
</div>
<div class="section" id="exercise-2">
<h3>Exercise 2<a class="headerlink" href="#exercise-2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="n">tutorial</span>

<span class="n">Person</span> <span class="n">relativeOf</span><span class="p">(</span><span class="n">Person</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span> <span class="n">parentOf</span><span class="o">*</span><span class="p">(</span><span class="k">result</span><span class="p">)</span> <span class="o">=</span> <span class="n">parentOf</span><span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="p">}</span>

<span class="k">predicate</span> <span class="n">hasCriminalRecord</span><span class="p">(</span><span class="n">Person</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;Hester&quot;</span> <span class="k">or</span>
  <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;Hugh&quot;</span> <span class="k">or</span>
  <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;Charlie&quot;</span>
<span class="p">}</span>

<span class="k">from</span> <span class="n">Person</span> <span class="n">p</span>
<span class="k">where</span>
  <span class="k">not</span> <span class="n">p</span><span class="p">.</span><span class="n">isDeceased</span><span class="p">()</span> <span class="k">and</span>
  <span class="n">p</span> <span class="o">=</span> <span class="n">relativeOf</span><span class="p">(</span><span class="s">&quot;King Basil&quot;</span><span class="p">)</span> <span class="k">and</span>
  <span class="k">not</span> <span class="n">hasCriminalRecord</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="k">select</span> <span class="n">p</span>
</pre></div>
</div>
</div>
</div>
</div>


    </article>

    <!-- GitHub footer, with links to terms and privacy statement -->
    <div class="px-3 px-md-6 f6 py-4 d-sm-flex flex-justify-between flex-row-reverse flex-items-center border-top">
        <ul class="list-style-none d-flex flex-items-center mb-3 mb-sm-0 lh-condensed-ultra">
            <li class="mr-3">
                <a href="https://twitter.com/github" title="GitHub on Twitter" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 273.5 222.3" class="d-block" height="18">
                        <path
                            d="M273.5 26.3a109.77 109.77 0 0 1-32.2 8.8 56.07 56.07 0 0 0 24.7-31 113.39 113.39 0 0 1-35.7 13.6 56.1 56.1 0 0 0-97 38.4 54 54 0 0 0 1.5 12.8A159.68 159.68 0 0 1 19.1 10.3a56.12 56.12 0 0 0 17.4 74.9 56.06 56.06 0 0 1-25.4-7v.7a56.11 56.11 0 0 0 45 55 55.65 55.65 0 0 1-14.8 2 62.39 62.39 0 0 1-10.6-1 56.24 56.24 0 0 0 52.4 39 112.87 112.87 0 0 1-69.7 24 119 119 0 0 1-13.4-.8 158.83 158.83 0 0 0 86 25.2c103.2 0 159.6-85.5 159.6-159.6 0-2.4-.1-4.9-.2-7.3a114.25 114.25 0 0 0 28.1-29.1"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3">
                <a href="https://www.facebook.com/GitHub" title="GitHub on Facebook" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.3 15.4" class="d-block" height="18">
                        <path
                            d="M14.5 0H.8a.88.88 0 0 0-.8.9v13.6a.88.88 0 0 0 .8.9h7.3v-6h-2V7.1h2V5.4a2.87 2.87 0 0 1 2.5-3.1h.5a10.87 10.87 0 0 1 1.8.1v2.1h-1.3c-1 0-1.1.5-1.1 1.1v1.5h2.3l-.3 2.3h-2v5.9h3.9a.88.88 0 0 0 .9-.8V.8a.86.86 0 0 0-.8-.8z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3">
                <a href="https://www.youtube.com/github" title="GitHub on YouTube" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.17 13.6" class="d-block" height="16">
                        <path
                            d="M18.77 2.13A2.4 2.4 0 0 0 17.09.42C15.59 0 9.58 0 9.58 0a57.55 57.55 0 0 0-7.5.4A2.49 2.49 0 0 0 .39 2.13 26.27 26.27 0 0 0 0 6.8a26.15 26.15 0 0 0 .39 4.67 2.43 2.43 0 0 0 1.69 1.71c1.52.42 7.5.42 7.5.42a57.69 57.69 0 0 0 7.51-.4 2.4 2.4 0 0 0 1.68-1.71 25.63 25.63 0 0 0 .4-4.67 24 24 0 0 0-.4-4.69zM7.67 9.71V3.89l5 2.91z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3 flex-self-start">
                <a href="https://www.linkedin.com/company/github" title="GitHub on Linkedin" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18" class="d-block" height="18">
                        <path
                            d="M3.94 2A2 2 0 1 1 2 0a2 2 0 0 1 1.94 2zM4 5.48H0V18h4zm6.32 0H6.34V18h3.94v-6.57c0-3.66 4.77-4 4.77 0V18H19v-7.93c0-6.17-7.06-5.94-8.72-2.91z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://github.com/github" title="GitHub's organization" style="color: #959da5;">
                    <svg version="1.1" width="20" height="20" viewBox="0 0 16 16" class="octicon octicon-mark-github"
                        aria-hidden="true">
                        <path fill-rule="evenodd"
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                        </path>
                    </svg>
                </a>
            </li>
        </ul>
        <ul class="list-style-none d-flex text-gray">
            <li class="mr-3">&copy; 
                <script type="text/javascript">document.write(new Date().getFullYear());</script> GitHub, Inc.</li>
            <li class="mr-3"><a
                    href="https://docs.github.com/github/site-policy/github-terms-of-service"
                    class="link-gray">Terms </a></li>
            <li><a href="https://docs.github.com/github/site-policy/github-privacy-statement"
                    class="link-gray">Privacy </a></li>
        </ul>
    </div>
</div>
</main>

<script type="text/javascript">
    $(document).ready(function () {
        $(".toggle > *").hide();
        $(".toggle .name").show();
        $(".toggle .name").click(function () {
            $(this).parent().children().not(".name").toggle(400);
            $(this).parent().children(".name").toggleClass("open");
        })
    });
</script>

  </body>
</html>